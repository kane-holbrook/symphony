<html>
    <head>
        <style>
        html {
            color:white;
            font-family:'Roboto', sans-serif;
            font-size:11px;
            margin:0;
        }

        #messages {
            display: flex;
            flex-direction:column;
            gap:0.5ch;
        }
        
        </style>


        <script src="message.js" defer></script>
    </head>

    <body>
        <div id="messages">
        </div>
        
        <script>
            const GMod = {
                PushMessage(msg) {
                    // Parse the incoming JSON string if it's in string format
                    const messageData = typeof msg === "string" ? JSON.parse(msg) : msg;

                    // Find the messages container
                    const Messages = document.querySelector('#messages');
                    if (!Messages) {
                        console.error("Messages container not found");
                        return;
                    }

                    // Create a new custom element
                    const messageElement = document.createElement("con-msg");
                    messageElement.setAttribute("timestamp", messageData.timestamp || "");
                    messageElement.setAttribute("type", messageData.type || "");
                    messageElement.setAttribute("realm", messageData.realm || "");

                    // Add content to the "content" slot
                    const contentSlot = document.createElement("span");
                    contentSlot.setAttribute("slot", "content");
                    contentSlot.innerHTML = messageData.content || "";
                    messageElement.appendChild(contentSlot);

                    // Add data to the "data" slot if it exists
                    if (messageData.data) {
                        const dataSlot = document.createElement("span");
                        dataSlot.setAttribute("slot", "data");
                        dataSlot.textContent = messageData.data;
                        messageElement.appendChild(dataSlot);
                    }

                    // Append the new message element to the messages container
                    Messages.appendChild(messageElement);
                }
            };
        </script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        
        <!-- and it's easy to individually load additional languages -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
        
        <script>hljs.highlightAll();</script>
    </body>
</html>